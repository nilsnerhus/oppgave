<div id="chapter-metrics" class="callout callout-style-default callout-note callout-titled">
  <div class="callout-header d-flex align-content-center">
    <div class="callout-icon-container">
      <i class="callout-icon"></i>
    </div>
    <div class="callout-title-container">Chapter Metrics</div>
  </div>
  <div class="callout-body-container callout-body">
    <p>Calculating metrics...</p>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Get the current URL path to identify the chapter
  const path = window.location.pathname;
  
  // Only show on chapter pages, not index or other pages
  if (!path.endsWith('/index.html') && !path.endsWith('/')) {
    // Get all paragraphs in the main content
    const paragraphs = document.querySelectorAll('main p');
    let text = '';
    
    // Concatenate the text from all paragraphs
    paragraphs.forEach(p => {
      text += p.textContent + ' ';
    });
    
    // Calculate metrics
    const charCount = text.length;
    const pages = (charCount / 2400).toFixed(0);
    const percentage = ((charCount / 24000) * 100).toFixed(1);
    
    // Update the metrics display
    document.querySelector('#chapter-metrics .callout-body').innerHTML = 
      `<p>Current length: <strong>${pages} pages</strong> (${percentage}% of target)</p>`;
    
  } else {
    // Hide the metrics box if not on a chapter page
    const metrics = document.getElementById('chapter-metrics');
    if (metrics) metrics.style.display = 'none';
  }
});
</script>