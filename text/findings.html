<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Findings – 100 billion dollar COP-out</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../text/discussion.html" rel="next">
<link href="../text/methods.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-6e4858b4921ffe5a9c7d897cee0e5447.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../text/findings.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Findings</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">100 billion dollar COP-out</a> 
        <div class="sidebar-tools-main">
    <a href="../100-billion-dollar-COP-out.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Abstract</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/frontpage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Handle paths correctly since we’re in text/ subdirectory</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/context.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Context</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/lit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Literature review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Theory</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Methods</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/findings.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Findings</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../text/conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#topics" id="toc-topics" class="nav-link active" data-scroll-target="#topics"><span class="header-section-number">7.1</span> Topics</a></li>
  <li><a href="#dominance" id="toc-dominance" class="nav-link" data-scroll-target="#dominance"><span class="header-section-number">7.2</span> Dominance</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-findings" class="quarto-section-identifier"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Findings</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<blockquote class="blockquote">
<p>The analysis of National Adaptation Plans through structural topic modeling and discourse centralization metrics reveals patterns that speak directly to questions of epistemological diversity, institutional influence, and the relationship between climate vulnerability and adaptation planning.</p>
</blockquote>
<p>This chapter presents the empirical results of applying computational text analysis to 45 National Adaptation Plans submitted to the UNFCCC between 2015 and 2025. The analysis proceeds through three integrated stages, each building upon the previous to develop a comprehensive picture of how climate adaptation is conceptualized across different national contexts.</p>
<p>The structural topic modeling stage employs machine learning algorithms to identify latent thematic patterns that organize adaptation discourse, revealing which aspects of climate response receive sustained attention and which remain marginal across the corpus. This unsupervised approach allows themes to emerge from the data itself rather than being imposed through predetermined categories, enabling discovery of patterns that might not be apparent through traditional qualitative analysis.</p>
<p>The discourse centralization analysis quantifies the degree to which adaptation planning concentrates on narrow thematic foci versus embracing diverse approaches. Using the Dominance Index—a novel application of concentration metrics to policy discourse—this stage examines how focused or dispersed adaptation conceptualization is both within individual documents and across systematic country groupings.</p>
<p>The variance decomposition stage employs statistical techniques borrowed from experimental design to partition observed differences in discourse patterns according to theoretically relevant factors: regional institutional contexts, economic positioning in the global system, geographic vulnerability characteristics, and temporal evolution of the adaptation planning process. This approach reveals the relative explanatory power of different structural factors in shaping how countries articulate their adaptation approaches.</p>
<p>The first section presents the topics identified through structural topic modeling, examining their content, prevalence, and distribution across the corpus. These topics range from sectoral concerns like water resources and agriculture to procedural themes involving finance and governance. Understanding what these topics contain and how prevalent they are provides the foundation for interpreting subsequent patterns of concentration and variation. The analysis reveals not only what countries discuss when planning adaptation but also what remains absent or marginal in these discussions.</p>
<p>The second section examines patterns of discourse centralization through the Dominance Index calculated at the corpus level. This analysis reveals whether countries within particular groupings converge on similar themes or maintain diverse approaches. The analysis systematically examines these patterns across four dimensions: income levels ranging from low to high, regional groupings spanning six geographic areas, special geographic designations for Small Island Developing States and Landlocked Developing Countries, and temporal periods reflecting the evolution of adaptation planning from 2015 to 2025. These comparisons reveal where discourse shows greater uniformity versus diversity.</p>
<p>The third section investigates which factors best explain the variation observed in discourse patterns through variance decomposition analysis. By partitioning the differences in dominance values according to regional, economic, geographic, and temporal categories, this analysis reveals the relative importance of different factors in shaping adaptation discourse. The results indicate whether countries with similar economic positions, regional affiliations, geographic vulnerabilities, or submission periods tend to conceptualize adaptation in similar ways, providing insight into what drives convergence or divergence in adaptation planning.</p>
<p>Throughout this chapter, technical concepts are explained as they arise, with the Dominance Index serving as the primary metric for quantifying discourse patterns. Values are presented systematically across all country groupings to ensure transparency and enable readers to assess the patterns for themselves. While interpretation of what these patterns mean for understanding adaptation governance is reserved for the discussion chapter, the findings presented here provide the empirical foundation for those arguments.</p>
<section id="topics" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="topics"><span class="header-section-number">7.1</span> Topics</h2>
<blockquote class="blockquote">
<p>The structural topic model identified topics that capture how climate adaptation is conceptualized across National Adaptation Plans, providing the foundation for understanding patterns of discourse concentration and variation.</p>
</blockquote>
<p>The structural topic model identified 8 topics organizing adaptation discourse across National Adaptation Plans through an iterative process that optimizes semantic coherence and topic exclusivity. The semantic interpretation relies on FREX (frequency-exclusivity) terms that identify distinctive vocabulary, high-probability terms that reveal common usage patterns, and country clustering patterns that provide validation for topic meanings.</p>
<p>The identified topics organize into three substantive categories that capture different dimensions of adaptation planning discourse. Procedural topics (21.3% of total discourse) center on administrative and institutional frameworks rather than substantive adaptation content. Sectoral and technical topics (47.8% of discourse) address specific domains of environmental challenge and technical response. Contextual topics (30.9% of discourse) emphasize particular geographic or institutional contexts that require specialized approaches.</p>
<p>Two topics representing 21.3% of discourse cluster around administrative and institutional processes rather than substantive adaptation content.</p>
<p><strong>coastal.</strong> This most prevalent topic (9.1% of corpus) exhibits FREX terms “sea, tropic, cyclon, coral, coastal, rise, reef, slr, coast, island” and high-probability terms. The semantic field demonstrates procedural orientation: “pro” (procedures), “counti” (accounting), “chapter” (document organization), and “mandat” (mandates). The cross-national pattern Tonga (0.395), Philippines (0.36) indicates that procedural concerns transcend regional boundaries, with administrative elements constituting the largest single thematic component of adaptation planning.</p>
<p><strong>Poverty.</strong> This topic (12.2% of corpus) shows FREX terms “poverti, disrupt, poor, children, percent, migrat, women, growth, sanit, medium-term” and high-probability terms. The semantic pattern centers on territorial and social organization: “territori” (territorial), “transit” (transitions), “famili” (family), and “nativ” (native/indigenous). The clustering around Mozambique (0.417), Tonga (0.354) reflects Spanish- and Portuguese-speaking contexts where territorial sovereignty and indigenous rights represent significant policy considerations.</p>
<p>Four topics representing 47.8% of discourse address specific environmental domains and technical approaches to adaptation challenges.</p>
<p><strong>agriculture.</strong> This topic (11.9% of corpus) shows FREX terms “livestock, climate-resili, wetland, harvest, farm, pest, watersh, altern, wildlif, medium” and high-probability terms. The semantic field encompasses rural development: “wash” (water/sanitation systems), “hill” (mountainous terrain), “wildlif” (wildlife conservation), and “nationwid” (national programs). The country pattern Sri Lanka (0.498), Bangladesh (0.491) represents nations with significant rural populations and forest-dependent communities.</p>
<p><strong>institutional.</strong> This topic (16.6% of corpus) exhibits FREX terms “offic, organis, depart, output, divis, partner, busi, perform, partnership, drm” and high-probability terms. The semantic analysis indicates water infrastructure focus: “defens” (defensive structures), “mountain” (mountain environments), “basin” (watershed management), and “norm” (technical standards). The pattern South Africa (0.615), Kiribati (0.574) represents contexts requiring sophisticated water management infrastructure.</p>
<p><strong>climate_modeling.</strong> This topic (9.6% of corpus) shows FREX terms “rcp, centuri, day, ensembl, trend, rainfal, precipit, decreas, maximum, confid” and high-probability terms. The semantic field centers on tropical cyclones: “atol” (atoll environments), “typhoon” and “cyclon” (storm systems), and “pathway” (storm tracks). The clustering West Bank and Gaza (0.649), Serbia (0.639) represents classic cyclone-prone regions across Pacific and Atlantic basins.</p>
<p><strong>indigenous.</strong> This topic (9.7% of corpus) exhibits FREX terms “indigen, territori, transit, task, instrument, view, line, refuge, execut, perspect” and high-probability terms. The semantic analysis presents technical vocabulary: “ensembl” (ensemble modeling), “centuri” (century timeframes), and “frost” (frost events). The pattern Israel (0.691), Brazil (0.667) suggests technical assessment approaches across different developmental contexts.</p>
<p>Four topics representing 30.9% of discourse emphasize specific regional contexts and humanitarian challenges.</p>
<p><strong>irrigation.</strong> Accounting for 7.8% of discourse, FREX terms “feder, multilater, irrig, hydrometeorolog, percentag, west, mountain, wastewat, law, basin” with high-probability terms. The country clustering of Sri Lanka and Sudan represents diverse contexts with strong institutional coordination needs. The semantic emphasis on rangeland and secretariat functions supports labeling this as institutional coordination, though the regional specificity suggests particular institutional arrangements.</p>
<p><strong>NAP.</strong> The second most prevalent topic overall (23.1% of discourse) shows FREX terms “gcf, ndc, unfccc, mainstream, pari, document, step, napa, mandat, chapter” paired with high-probability terms. The country pattern of St.&nbsp;Lucia and Kiribati represents small island developing states facing multiple hazards. Representative text emphasizes coastal and marine systems under threat, supporting the label of coastal vulnerability and small island concerns.</p>
</section>
<section id="dominance" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="dominance"><span class="header-section-number">7.2</span> Dominance</h2>
<blockquote class="blockquote">
<p>Analysis of discourse centralization reveals remarkably high concentration across all National Adaptation Plans, with corpus-level patterns showing significant variation across income groups, regions, temporal periods, and geographic categories.</p>
</blockquote>
<p>The Dominance Index quantifies discourse centralization by measuring the proportion of discourse concentrated in the top three most prevalent topics. The corpus-level analysis calculates average topic proportions across countries within each category, then identifies the three most prevalent topics and their combined share of discourse. Normalized scores range from 0 (theoretical minimum) to 1 (complete concentration), enabling comparison across categories.</p>
<p>Across all countries, the overall corpus-level dominance reaches 23%. To contextualize this concentration level: if adaptation discourse distributed evenly across all 8 topics, each would account for 10% of total content. Instead, the top three topics alone account for 23% of all discourse, while the remaining seven topics share the remaining 77%. This represents substantial concentration where a small number of themes dominate adaptation planning discourse globally.</p>
<p>Among income groups, discourse centralization varies meaningfully across economic categories, revealing a clear gradient in discourse diversity. Low-income countries show the highest corpus-level dominance at 34.7%. In practical terms, this means that in a typical low-income country NAP, nearly three-quarters of all topic-related content relates to just three themes, leaving only one-quarter distributed among the remaining seven topics.</p>
<p>Lower-middle income countries display dominance of 39.9%, while upper-middle income countries show dominance of 20.4%. The progression creates a stepwise pattern across income categories. Examining representative NAPs from each group: low-income country plans concentrate nearly three-quarters of topic-related content within their top three themes, leaving only one-quarter distributed among the remaining seven topics. Upper-middle income countries, by contrast, concentrate roughly 58% in their top three topics—a 16-percentage point difference in discourse structure that indicates systematically different approaches to thematic breadth versus focus.</p>
<p>Regional patterns show consistently high discourse centralization across all regions, though with distinct thematic emphases. East Asia &amp; Pacific displays dominance of 38%, Sub-Saharan Africa shows dominance of 40.4%, and Latin America &amp; Caribbean exhibits dominance of 49.4%. While all regions maintain high centralization levels, each emphasizes distinct combinations of topics, indicating that regional institutional networks create convergence within regions while maintaining differentiated approaches between regions.</p>
<p>The similar levels of centralization across regions, despite their different institutional contexts and development trajectories, indicates that each region emphasizes distinct combinations of topics while maintaining comparable overall concentration levels.</p>
<p>The geographic vulnerability categories both demonstrate high discourse centralization despite facing fundamentally different climate challenges. Small Island Developing States show dominance of 51%, while Landlocked Developing Countries display dominance of 32.8%. The similarity in centralization levels between these groups is particularly striking given their contrasting vulnerabilities—sea-level rise and coastal erosion for island states versus water scarcity and desertification for landlocked countries.</p>
<p>The temporal analysis reveals how adaptation discourse has evolved as countries have gained experience with NAP preparation and as international frameworks have matured. The pattern shows a distinctive arc across the three time periods. Middle period submissions (2019-2021) show the highest dominance at 43.4%, meaning that during this period, the top three topics accounted for nearly 75% of discourse content in the average NAP.</p>
<p>Early submissions (2015-2018) display dominance of 20.2%, representing a moderate level of concentration where roughly two-thirds of content relates to the top three topics. Late submissions (2022-2025) exhibit the lowest dominance at 13.5%, with just over half of discourse concentrated in the top three topics.</p>
<p>This temporal progression creates a notable inverted U-shape pattern: starting from 66% concentration in early NAPs, rising to 75% in middle-period NAPs, then declining to 53% in recent submissions. The 22-percentage point difference between peak and current concentration levels represents a substantial shift in discourse structure over the decade-long period.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../text/methods.html" class="pagination-link" aria-label="Methods">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Methods</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../text/discussion.html" class="pagination-link" aria-label="Discussion">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Discussion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>